{% extends 'core/base.html' %}

{% block content %}
{% load bootstrap4 %}
{% load static %}
<div class="justify-content-center text-center">
    <h4>Daily Load Reading Input Form</h4>
</div>
<div class="row py-4">
    <div class="col-md-6">
        <form method="GET">
            <div class="form-row">
                <div class="col-md-4">
                    <input type="date" name="date" id="date" class="form-control">
                </div>
                <div class="col-md-4">
                    <input type="time" name="hour" id="hour" value="00:00" step="3600" class="form-control">
                </div>
                <div class="col-md-4">
                    <input type="submit" value="Submit" class="btn btn-outline-success">
                </div>

            </div>

        </form>
    </div>
</div>

<form method="POST">
    {% csrf_token %}
    {% if selected_date %}
    <table class="table">
        <thead class="thead-dark">
            <th scope="col">Date</th>
            <th scope="col">Feeder</th>
            <th scope="col">Load (MW)</th>
            <th scope="col">Status</th>
        </thead>
        {{ formset.management_form }}
        {% for hidden in formset.hidden_fields %}
        {{ hidden }}
        {% endfor %}
        <!-- {% bootstrap_formset formset %} -->
        {% for form in formset %}
        {{ form.id }}
        {{ form.ORDER }}
        {{ form.DELETE }}
        <tr>
            <td>{% bootstrap_field form.date show_label=False field_class='form-control-sm disable' %}</td>
            <td>{% bootstrap_field form.feeder show_label=False field_class='form-control-sm' %}</td>
            <td>{% bootstrap_field form.load_mw show_label=False field_class='form-control-sm' %}</td>
            <td>{% bootstrap_field form.status show_label=False field_class='form-control-sm' %}</td>
        </tr>
        {% endfor %}
    </table>
    <input type="submit" value="Save" class="btn btn-primary">
</form>
{% else %}
<div class="text-center my-5">
    <div class="card">
        <div class="card-body">
            <em>
                No Date and Hour Selected. <br>
                Select a date and hour to input data!
            </em>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}